 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Solana Wallet Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #121212 0%, #1e1e1e 100%);
            font-family: 'Inter', sans-serif;
        }
        .wallet-card {
            backdrop-filter: blur(10px);
            background-color: rgba(30, 30, 30, 0.8);
        }
    </style>
</head>
<body class="bg-black text-white min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Wallet Connection Section -->
        <div id="wallet-connection" class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-bold text-green-400">Solana Wallet Pro</h1>
            <button id="connect-wallet" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">
                Connect Wallet
            </button>
        </div>

        <!-- Wallet Dashboard -->
        <div id="wallet-dashboard" class="hidden">
            <!-- Wallet Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="wallet-card bg-gray-900 rounded-lg p-6 col-span-2">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold">Wallet Overview</h2>
                        <button id="disconnect-wallet" class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg">
                            Disconnect
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <p class="text-gray-400">Total Balance</p>
                            <h3 id="total-balance" class="text-3xl font-bold text-green-400">$0.00</h3>
                        </div>
                        <div>
                            <p class="text-gray-400">Wallet Address</p>
                            <p id="wallet-address" class="text-blue-300 truncate"></p>
                        </div>
                        <div>
                            <p class="text-gray-400">Network</p>
                            <p class="text-yellow-400">Solana Mainnet</p>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="wallet-card bg-gray-900 rounded-lg p-6">
                    <h2 class="text-2xl font-bold mb-4">Quick Actions</h2>
                    <div class="grid grid-cols-3 gap-4">
                        <button id="deposit-btn" class="bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg">
                            Deposit
                        </button>
                        <button id="withdraw-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded-lg">
                            Withdraw
                        </button>
                        <button id="swap-btn" class="bg-purple-500 hover:bg-purple-600 text-white py-2 rounded-lg">
                            Swap
                        </button>
                    </div>
                </div>
            </div>

            <!-- Transaction History -->
            <div class="wallet-card bg-gray-900 rounded-lg p-6 mb-8">
                <h2 class="text-2xl font-bold mb-4">Transaction History</h2>
                <div id="transaction-history" class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="bg-gray-800">
                                <th class="p-2 text-left">Type</th>
                                <th class="p-2 text-left">Token</th>
                                <th class="p-2 text-left">Amount</th>
                                <th class="p-2 text-left">Date</th>
                                <th class="p-2 text-left">Status</th>
                            </tr>
                        </thead>
                        <tbody id="transaction-list"></tbody>
                    </table>
                </div>
            </div>

            <!-- Modals -->
            <div id="modals">
                <!-- Deposit Modal -->
                <div id="deposit-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                    <div class="bg-gray-900 rounded-lg p-8 w-full max-w-md">
                        <h2 class="text-2xl font-bold mb-4">Deposit Funds</h2>
                        <div class="mb-4">
                            <label class="block mb-2">Select Token</label>
                            <select id="deposit-token" class="w-full p-2 bg-gray-800 rounded">
                                <option value="SOL">SOL</option>
                                <option value="USDC">USDC</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block mb-2">Amount</label>
                            <input type="number" id="deposit-amount" class="w-full p-2 bg-gray-800 rounded" placeholder="Enter amount">
                        </div>
                        <div class="flex space-x-4">
                            <button id="execute-deposit" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded">
                                Deposit
                            </button>
                            <button id="cancel-deposit" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-3 rounded">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Withdraw Modal -->
                <div id="withdraw-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                    <div class="bg-gray-900 rounded-lg p-8 w-full max-w-md">
                        <h2 class="text-2xl font-bold mb-4">Withdraw Funds</h2>
                        <div class="mb-4">
                            <label class="block mb-2">Select Token</label>
                            <select id="withdraw-token" class="w-full p-2 bg-gray-800 rounded">
                                <option value="SOL">SOL</option>
                                <option value="USDC">USDC</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block mb-2">Amount</label>
                            <input type="number" id="withdraw-amount" class="w-full p-2 bg-gray-800 rounded" placeholder="Enter amount">
                        </div>
                        <div class="mb-4">
                            <label class="block mb-2">Recipient Address</label>
                            <input type="text" id="withdraw-address" class="w-full p-2 bg-gray-800 rounded" placeholder="Enter recipient address">
                        </div>
                        <div class="flex space-x-4">
                            <button id="execute-withdraw" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded">
                                Withdraw
                            </button>
                            <button id="cancel-withdraw" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-3 rounded">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Swap Modal -->
                <div id="swap-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                    <div class="bg-gray-900 rounded-lg p-8 w-full max-w-md">
                        <h2 class="text-2xl font-bold mb-4">Token Swap</h2>
                        <div class="mb-4">
                            <label class="block mb-2">From Token</label>
                            <select id="swap-from-token" class="w-full p-2 bg-gray-800 rounded">
                                <option value="SOL">SOL</option>
                                <option value="USDC">USDC</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block mb-2">To Token</label>
                            <select id="swap-to-token" class="w-full p-2 bg-gray-800 rounded">
                                <option value="USDC">USDC</option>
                                <option value="SOL">SOL</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="block mb-2">Amount</label>
                            <input type="number" id="swap-amount" class="w-full p-2 bg-gray-800 rounded" placeholder="Enter amount">
                        </div>
                        <div class="flex space-x-4">
                            <button id="execute-swap" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded">
                                Swap Tokens
                            </button>
                            <button id="cancel-swap" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-3 rounded">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class SolanaWalletManager {
            constructor() {
                this.connection = null;
                this.wallet = null;
                this.publicKey = null;
                this.tokenBalances = {};
                this.tokenPrices = {};
                this.transactions = [];

                this.initializeEventListeners();
            }

            initializeEventListeners() {
                // Wallet Connection
                document.getElementById('connect-wallet').addEventListener('click', () => this.connectWallet());
                document.getElementById('disconnect-wallet').addEventListener('click', () => this.disconnectWallet());

                // Modal Triggers
                document.getElementById('deposit-btn').addEventListener('click', () => this.openDepositModal());
                document.getElementById('withdraw-btn').addEventListener('click', () => this.openWithdrawModal());
                document.getElementById('swap-btn').addEventListener('click', () => this.openSwapModal());

                // Modal Cancellations
                document.getElementById('cancel-deposit').addEventListener('click', () => this.closeModal('deposit-modal'));
                document.getElementById('cancel-withdraw').addEventListener('click', () => this.closeModal('withdraw-modal'));
                document.getElementById('cancel-swap').addEventListener('click', () => this.closeModal('swap-modal'));

                // Modal Executions
                document.getElementById('execute-deposit').addEventListener('click', () => this.executeDeposit());
                document.getElementById('execute-withdraw').addEventListener('click', () => this.executeWithdraw());
                document.getElementById('execute-swap').addEventListener('click', () => this.executeSwap());
            }

            async connectWallet() {
                try {
                    if (!window.solana?.isPhantom) {
                        this.showNotification('error', 'Phantom wallet not found');
                        return;
                    }

                    const wallet = window.solana;
                    await wallet.connect();

                    this.wallet = wallet;
                    this.publicKey = wallet.publicKey;
                    this.connection = new solanaWeb3.Connection(
                        solanaWeb3.clusterApiUrl('mainnet-beta'), 
                        'confirmed'
                    );

                    this.updateWalletUI();
                    await this.fetchWalletDetails();
                } catch (error) {
                    this.showNotification('error', `Connection failed: ${error.message}`);
                }
            }

            async fetchWalletDetails() {
                try {
                    await Promise.all([
                        this.fetchSolBalance(),
                        this.fetchTokenPrices(),
                        this.fetchTransactionHistory()
                    ]);

                    this.updateTotalBalance();
                    this.renderTransactionHistory();
                } catch (error) {
                    this.showNotification('error', `Wallet details fetch failed: ${error.message}`);
                }
            }

            async fetchSolBalance() {
                try {
                    const balance = await this.connection.getBalance(this.publicKey);
                    this.tokenBalances['SOL'] = balance / solanaWeb3.LAMPORTS_PER_SOL;
                } catch (error) {
                    this.showNotification('error', `SOL balance fetch failed: ${error.message}`);
                }
            }

            async fetchTokenPrices() {
                try {
                    const response = await axios.get(
                        'https://api.coingecko.com/api/v3/simple/price?ids=solana,usd-coin&vs_currencies=usd'
                    );

                    this.tokenPrices = {
                        SOL: response.data.solana.usd,
                        USDC: response.data['usd-coin'].usd
                    };
                } catch (error) {
                    this.showNotification('error', `Price fetch failed: ${error.message}`);
                }
            }

            async fetchTransactionHistory() {
                // Simulate transaction history
                this.transactions = [
                    {
                        type: 'Deposit',
                        token: 'SOL',
                        amount: 1.5,
                        date: new Date().toLocaleString(),
                        status: 'Completed'
                    },
                    {
                        type: 'Swap',
                        token: 'SOL to USDC',
                        amount: 1,
                        date: new Date().toLocaleString(),
                        status: 'Completed'
                    }
                ];
            }

            updateTotalBalance() {
                let totalBalance = 0;
                Object.entries(this.tokenBalances).forEach(([token, balance]) => {
                    const price = this.tokenPrices[token] || 0;
                    totalBalance += balance * price;
                });

                document.getElementById('total-balance').textContent = 
                    `$${totalBalance.toFixed(2)}`;
            }

            renderTransactionHistory() {
                const transactionList = document.getElementById('transaction-list');
                transactionList.innerHTML = '';

                this.transactions.forEach(tx => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-gray-800';
                    row.innerHTML = `
                        <td class="p-2">${tx.type}</td>
                        <td class="p-2">${tx.token}</td>
                        <td class="p-2">${tx.amount}</td>
                        <td class="p-2">${tx.date}</td>
                        <td class="p-2">
                            <span class="${
                                tx.status === 'Completed' 
                                    ? 'text-green-500' 
                                    : 'text-red-500'
                            }">${tx.status}</span>
                        </td>
                    `;
                    transactionList.appendChild(row);
                });
            }

            updateWalletUI() {
                document.getElementById('wallet-connection').classList.add('hidden');
                document.getElementById('wallet-dashboard').classList.remove('hidden');
                
                const addressElement = document.getElementById('wallet-address');
                addressElement.textContent = this.formatAddress(this.publicKey.toBase58());
            }

            formatAddress(address) {
                return `${address.slice(0, 6)}...${address.slice(-4)}`;
            }

            disconnectWallet() {
                if (this.wallet) {
                    this.wallet.disconnect();
                }

                // Reset UI and state
                document.getElementById('wallet-connection').classList.remove('hidden');
                document.getElementById('wallet-dashboard').classList.add('hidden');
                
                // Reset all states
                this.connection = null;
                this.wallet = null;
                this.publicKey = null;
                this.tokenBalances = {};
                this.tokenPrices = {};
                this.transactions = [];

                // Reset UI elements
                document.getElementById('total-balance').textContent = '$0.00';
                document.getElementById('wallet-address').textContent = '';
                document.getElementById('transaction-list').innerHTML = '';
            }

            // Modal Methods
            openDepositModal() {
                this.openModal('deposit-modal');
            }

            openWithdrawModal() {
                this.openModal('withdraw-modal');
            }

            openSwapModal() {
                this.openModal('swap-modal');
            }

            openModal(modalId) {
                document.getElementById(modalId).classList.remove('hidden');
                document.getElementById(modalId).classList.add('flex');
            }

            closeModal(modalId) {
                document.getElementById(modalId).classList.add('hidden');
                document.getElementById(modalId).classList.remove('flex');
            }

            // Transaction Methods
            async executeDeposit() {
                const token = document.getElementById('deposit-token').value;
                const amount = parseFloat(document.getElementById('deposit-amount').value);

                try {
                    // Validate input
                    if (isNaN(amount) || amount <= 0) {
                        throw new Error('Invalid deposit amount');
                    }

                    // Simulate deposit
                    this.transactions.push({
                        type: 'Deposit',
                        token,
                        amount,
                        date: new Date().toLocaleString(),
                        status: 'Completed'
                    });

                    this.renderTransactionHistory();
                    this.closeModal('deposit-modal');
                    this.showNotification('success', `Deposited ${amount} ${token}`);
                } catch (error) {
                    this.showNotification('error', error.message);
                }
            }

            async executeWithdraw() {
                const token = document.getElementById('withdraw-token').value;
                const amount = parseFloat(document.getElementById('withdraw-amount').value);
                const address = document.getElementById('withdraw-address').value;

                try {
                    // Validate inputs
                    if (isNaN(amount) || amount <= 0) {
                        throw new Error('Invalid withdrawal amount');
                    }
                    if (!address) {
                        throw new Error('Invalid recipient address');
                    }

                    // Simulate withdrawal
                    this.transactions.push({
                        type: 'Withdraw',
                        token,
                        amount,
                        date: new Date().toLocaleString(),
                        status: 'Completed'
                    });

                    this.renderTransactionHistory();
                    this.closeModal('withdraw-modal');
                    this.showNotification('success', `Withdrawn ${amount} ${token}`);
                } catch (error) {
                    this.showNotification('error', error.message);
                }
            }

            async executeSwap() {
                const fromToken = document.getElementById('swap-from-token').value;
                const toToken = document.getElementById('swap-to-token').value;
                const amount = parseFloat(document.getElementById('swap-amount').value);

                try {
                    // Validate inputs
                    if (isNaN(amount) || amount <= 0) {
                        throw new Error('Invalid swap amount');
                    }
                    if (fromToken === toToken) {
                        throw new Error('Cannot swap to the same token');
                    }

                    // Simulate swap
                    this.transactions.push({
                        type: `Swap ${fromToken} to ${toToken}`,
                        token: `${fromToken} to ${toToken}`,
                        amount,
                        date: new Date().toLocaleString(),
                        status: 'Completed'
                    });

                    this.renderTransactionHistory();
                    this.closeModal('swap-modal');
                    this.showNotification('success', `Swapped ${amount} ${fromToken} to ${toToken}`);
                } catch (error) {
                    this.showNotification('error', error.message);
                }
            }

            // Notification Method
            showNotification(type, message) {
                const notification = document.createElement('div');
                notification.className = `
                    fixed top-4 right-4 p-4 rounded z-50
                    ${type === 'error' ? 'bg-red-500' : 'bg-green-500'}
                    text-white
                `;
                notification.textContent = message;
                document.body.appendChild(notification);
                setTimeout(() => document.body.removeChild(notification), 5000);
            }
        }

        // Initialize Wallet Manager
        const walletManager = new SolanaWalletManager();
    </script>
</body>
</html>
